
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Advanced &#8212; Bit 0.4.3 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Frequently Asked Questions" href="../community/faq.html" />
    <link rel="prev" title="Fees" href="fees.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
<div class="documentwrapper">
  <div class="bodywrapper">
    <div class="body" role="main">
    
  <div class="section" id="advanced">
<span id="id1"></span><h1>Advanced<a class="headerlink" href="#advanced" title="Permalink to this headline">¶</a></h1>
<div class="section" id="server-integration">
<h2>Server Integration<a class="headerlink" href="#server-integration" title="Permalink to this headline">¶</a></h2>
<p>If you only want to use Bit for its raw speed to lessen the load on your
servers, you don’t have to use any of our network capabilities.</p>
<ul class="simple">
<li>Use <a class="reference internal" href="../dev/api.html#bit.PrivateKey.create_transaction" title="bit.PrivateKey.create_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_transaction()</span></code></a> instead of
<a class="reference internal" href="../dev/api.html#bit.PrivateKey.send" title="bit.PrivateKey.send"><code class="xref py py-func docutils literal notranslate"><span class="pre">send()</span></code></a></li>
<li>Supply <a class="reference internal" href="transactions.html#unspentparam"><span class="std std-ref">your own UTXOs</span></a></li>
<li>Set <a class="reference internal" href="transactions.html#feeparam"><span class="std std-ref">your own fee</span></a></li>
<li>Make sure all <a class="reference internal" href="transactions.html#outputsparam"><span class="std std-ref">Outputs</span></a> only use these currencies: satoshi, ubtc,
mbtc, or btc.</li>
</ul>
</div>
<div class="section" id="offline-transactions">
<span id="coldstorage"></span><h2>Offline Transactions<a class="headerlink" href="#offline-transactions" title="Permalink to this headline">¶</a></h2>
<p>Bit supports the signing of transactions for keys in cold storage. First you
need to prepare a transaction while connected to the internet using the
<a class="reference internal" href="../dev/api.html#bit.PrivateKey.prepare_transaction" title="bit.PrivateKey.prepare_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">prepare_transaction()</span></code></a> class method of a private key.
You must know your address.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit</span> <span class="kn">import</span> <span class="n">PrivateKeyTestnet</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit.network</span> <span class="kn">import</span> <span class="n">NetworkAPI</span><span class="p">,</span> <span class="n">satoshi_to_currency</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">satoshi_to_currency</span><span class="p">(</span><span class="n">NetworkAPI</span><span class="o">.</span><span class="n">get_balance_testnet</span><span class="p">(</span><span class="n">address</span><span class="p">),</span> <span class="s1">&#39;usd&#39;</span><span class="p">)</span>
<span class="go">&#39;833.03&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_data</span> <span class="o">=</span> <span class="n">PrivateKeyTestnet</span><span class="o">.</span><span class="n">prepare_transaction</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;n2eMqTT929pb1RDNuqEnxdaLau1rxy3efi&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;jpy&#39;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_data</span>
<span class="go">&#39;{&quot;unspents&quot;:[{&quot;amount&quot;:80775726,&quot;confirmations&quot;:1,&quot;script&quot;:&quot;76a914990ef60d63b5b5964a1c2282061af45123e93fcb88ac&quot;,&quot;txid&quot;:&quot;c47061643341aca8665ca7e447aff8c57bc0fd61a3ef731f44642b1d9fa46d5a&quot;,&quot;txindex&quot;:1}],&quot;outputs&quot;:[[&quot;n2eMqTT929pb1RDNuqEnxdaLau1rxy3efi&quot;,861],[&quot;muUFbvTKDEokGTVUjScMhw1QF2rtv5hxCz&quot;,80720625]]}&#39;</span>
</pre></div>
</div>
<p>This performs validation and returns a JSON string containing all the required
information to create a transaction. You should then take this to your offline
machine and use the <a class="reference internal" href="../dev/api.html#bit.PrivateKey.sign_transaction" title="bit.PrivateKey.sign_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">sign_transaction()</span></code></a> method of your
private key.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hex</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">tx_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hex</span>
<span class="go">&#39;01000000015a6da49f1d2b64441f73efa361fdc07bc5f8af47e4a75c66a8ac4133646170c4010000006a4730440220266c56a2592fbd6948f3e5d17720ad2dad57ce23a5cc0d2d4fd2315cbe5a798802203372b9b0d10e920462f9553392333e84cd8fa1d92953d0b4598888370dc187140121033d5c2875c9bd116875a71a5db64cffcb13396b163d039b1d9327824891804334ffffffff025d030000000000001976a914e7c1345fc8f87c68170b3aa798a956c2fe6a9eff88acf1b2cf04000000001976a914990ef60d63b5b5964a1c2282061af45123e93fcb88ac00000000&#39;</span>
</pre></div>
</div>
<p>Finally, bring this transaction back to your connected device and broadcast it.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit.network</span> <span class="kn">import</span> <span class="n">NetworkAPI</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NetworkAPI</span><span class="o">.</span><span class="n">broadcast_tx_testnet</span><span class="p">(</span><span class="n">tx_hex</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="blockchain-storage">
<h2>Blockchain Storage<a class="headerlink" href="#blockchain-storage" title="Permalink to this headline">¶</a></h2>
<p>Bit allows you to easily <a class="reference external" href="https://en.bitcoin.it/wiki/OP_RETURN">store messages or data</a> in the blockchain itself
using the <code class="docutils literal notranslate"><span class="pre">message</span></code> parameter of <a class="reference internal" href="../dev/api.html#bit.PrivateKey.create_transaction" title="bit.PrivateKey.create_transaction"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_transaction()</span></code></a>
or <a class="reference internal" href="../dev/api.html#bit.PrivateKey.send" title="bit.PrivateKey.send"><code class="xref py py-func docutils literal notranslate"><span class="pre">send()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">key</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s1">&#39;Simplicity level is over 9000!!!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Messages will be encoded as UTF-8 when stored. Also, do note that the length
of each datum must not exceed 40 bytes. Therefore, your resulting byte string
will be stored in chunks to adhere to this property if it is too long.</p>
</div>
<div class="section" id="services-timeout">
<h2>Services Timeout<a class="headerlink" href="#services-timeout" title="Permalink to this headline">¶</a></h2>
<p>If you want to change the default timeout of 5 seconds for service API calls:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit</span> <span class="kn">import</span> <span class="n">set_service_timeout</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_service_timeout</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="cache-times">
<span id="id2"></span><h2>Cache Times<a class="headerlink" href="#cache-times" title="Permalink to this headline">¶</a></h2>
<p>If you want to change the default cache time of exchange rates (60 seconds)
or recommended fees (10 minutes):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit</span> <span class="kn">import</span> <span class="n">set_fee_cache_time</span><span class="p">,</span> <span class="n">set_rate_cache_time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_rate_cache_time</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">set_fee_cache_time</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="hex-to-wif">
<span id="hextowif"></span><h2>Hex to WIF<a class="headerlink" href="#hex-to-wif" title="Permalink to this headline">¶</a></h2>
<p>If you store your keys as hex instead of WIF you lose the ability to retain
metadata. To convert your hex keys to WIF to use certain properties, do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit</span> <span class="kn">import</span> <span class="n">Key</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bit.format</span> <span class="kn">import</span> <span class="n">hex_to_wif</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compressed by default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key1</span> <span class="o">=</span> <span class="n">Key</span><span class="p">()</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">wif</span> <span class="o">=</span> <span class="n">hex_to_wif</span><span class="p">(</span><span class="n">key1</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(),</span> <span class="n">compressed</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key2</span> <span class="o">=</span> <span class="n">Key</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Same point on curve</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key1</span> <span class="o">==</span> <span class="n">key2</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Different public keys for derivation of address</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key1</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;15BYk3fNHwPB5GMjsxTX26QoWZZtwJnzCf&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key2</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;1BQCscSMaJhezQvX6hzCdcRVdsxJuMAdwt&#39;</span>
</pre></div>
</div>
</div>
</div>


    <br>
    <ul>
      <li>
        Previous topic: <a href="fees.html">Fees</a>
      </li>
      <li>
        Next topic: <a href="../community/faq.html">Frequently Asked Questions</a>
      </li>
    </ul>
    </div>
  </div>
</div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><!-- From https://github.com/kennethreitz/requests/blob/master/docs/_templates/sidebarlogo.html -->

<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/bit.png"/>
  </a>
</p>
<p>
<iframe src="https://ghbtns.com/github-btn.html?user=ofek&repo=bit&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>

<p>
  Bit is a modern Bitcoin library designed to be a pleasure to use for developers and end users alike.
</p>

<h3>Stay Informed</h3>
<p>Receive updates on new releases and upcoming projects.</p>

<p><iframe src="https://ghbtns.com/github-btn.html?user=ofek&type=follow&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="200" height="20"></iframe></p>

<p><a href="https://twitter.com/Ofekmeister" class="twitter-follow-button" data-show-count="false">Follow @Ofekmeister</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>


<h3>Other Projects</h3>

<p>More <a href="https://github.com/ofek">Ofek Lev</a> projects:</p>
<ul>
    <li><a href="https://github.com/ofek/privy">Privy</a></li>
</ul>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/ofek/bit">Bit @ GitHub</a></li>
  <li><a href="https://pypi.org/project/bit">Bit @ PyPI</a></li>
  <li><a href="https://github.com/ofek/bit/issues">Issue Tracker</a></li>
</ul>

<h3>Dependencies</h3>
<ul>
  <li><a href="https://github.com/ofek/coincurve">Coincurve</a></li>
  <li><a href="https://github.com/kennethreitz/requests">Requests</a></li>
</ul>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="keys.html">Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="network.html">Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="rates.html">Exchange Rates</a></li>
<li class="toctree-l1"><a class="reference internal" href="fees.html">Fees</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Advanced</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-integration">Server Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#offline-transactions">Offline Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blockchain-storage">Blockchain Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#services-timeout">Services Timeout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cache-times">Cache Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hex-to-wif">Hex to WIF</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/vulnerabilities.html">Vulnerability Disclosure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/updates.html">Stay Informed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/updates.html#release-history">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community/authors.html">Authors</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/api.html">Developer Interface</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="fees.html" title="previous chapter">Fees</a></li>
      <li>Next: <a href="../community/faq.html" title="next chapter">Frequently Asked Questions</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/guide/advanced.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><!-- From https://github.com/kennethreitz/requests/blob/master/docs/_templates/hacks.html -->

<!-- Alabaster (krTheme++) Hacks -->

<!-- CSS Adjustments (I'm very picky.) -->
<style type="text/css">

  /* Rezzy requires precise alignment. */
  img.logo {margin-left: -20px!important;}

  /* "Quick Search" should be capitalized. */
  div#searchbox h3 {text-transform: capitalize;}

  /* Make the document a little wider, less code is cut-off. */
  div.document {width: 1008px;}

  /* Much-improved spacing around code blocks. */
  div.highlight pre {padding: 11px 14px;}

  /* Remain Responsive! */
  @media screen and (max-width: 1008px) {
    div.sphinxsidebar {display: none;}
    div.document {width: 100%!important;}

    /* Have code blocks escape the document right-margin. */
    div.highlight pre {margin-right: -30px;}
  }

</style>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Ofek Lev.
      
      |
      <a href="../_sources/guide/advanced.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/ofek/bit" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>